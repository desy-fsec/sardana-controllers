-------------------------------
Generic controllers README file
-------------------------------

1 Compilation & installation

  This chapter describes the necessary steps for compilation

  all <install dir> references below refer to the desired installation directory.
  all <omni root> references below refer to OMNI_ROOT directory
  all <tango root> references below refer to TANGO_ROOT directory

1.1 Prerequisites

  - omniORB >= 4.1.0 with header files (development distribution)
  - Tango >= 6.0.0 with header files (development distribution)
  - PyTango >= 3.0.4
  - libhkl - (optional) necessary for diffractometer controller. See Appendix A 
             at the end on how to get, build and install hkl on your system

1.2 Compile and install
  
  Go to the Pool root directory and type:

  % mkdir build
  % cd build
  % ../configure
    
    - if compiling in debug mode provide:
        CXXFLAGS='-g -gstabs+ -O0'
    
    - if not system installation provide: 
        --prefix=<install dir>
        
    - if OMNI_ROOT environment variable is not present provide: 
        --with-omni-prefix=<omni root>
        
    - if TANGO_ROOT environment variable is not present provide: 
        --with-tango-prefix=<tango root>
      
    - if compiling the controller 'diffractometer':
      this controller needs the HKL library provided by SOLEIL. Therefore:
      
      - if HKL_ROOT environment variable is not present provide: 
        --with-hkl_prefix=<hkl root>
        
        Note: if no valid HKL library is found the compilation will succeed but
        the diffractometer controller will not be build.

  % make
  % sudo make install

2. Execution

  To make use of the controllers available through this installation please 
  look into the doc/ConfigUserGuide.lyx under section 4.

-----------------------
Appendix A: HKL library 
-----------------------

The HKL available from http://repo.or.cz/r/hkl.git.
It has been developed by the SOLEIL synchrotron.
The contact person is PICCA Frédéric-Emmanuel: frederic-emmanuel.picca .at. synchrotron-soleil.fr

To checkout and build (you need the 'git' tool and 'scons'):
 % git clone http://repo.or.cz/r/hkl.git
 % cd hkl
 % scons

In order to set a VALID HKL_ROOT (or --with-hkl-prefix) to build sardana, you 
need to make a symbolic link to the build result directory of hkl called 'lib'.
If you install the library on the system, the step above is, of course, 
unnecessary.

Example:
 - suppose you have checked out HKL into /home/bart/workspace
 - you are on linux with bash
 
 % cd hkl
 % scons
   (this will build scons in debug mode)
 % ln -s debug/linux2/src lib
 % export HKL_ROOT=/home/bart/workspace/hkl
